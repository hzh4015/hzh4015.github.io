<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Hbase概述及搭建 | Notes</title><meta name="keywords" content="Hbase 大数据"><meta name="author" content="秋水一色"><meta name="copyright" content="秋水一色"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="对学习Hbase的一些知识笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="Hbase概述及搭建">
<meta property="og:url" content="http://example.com/2022/06/08/Hbase%E6%A6%82%E8%BF%B0%E5%8F%8A%E6%90%AD%E5%BB%BA/index.html">
<meta property="og:site_name" content="Notes">
<meta property="og:description" content="对学习Hbase的一些知识笔记">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s2.loli.net/2022/06/15/25ImNvb9a8WBft3.webp">
<meta property="article:published_time" content="2022-06-07T16:00:00.000Z">
<meta property="article:modified_time" content="2022-06-15T07:35:16.894Z">
<meta property="article:author" content="秋水一色">
<meta property="article:tag" content="Hbase">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2022/06/15/25ImNvb9a8WBft3.webp"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2022/06/08/Hbase%E6%A6%82%E8%BF%B0%E5%8F%8A%E6%90%AD%E5%BB%BA/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Hbase概述及搭建',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-06-15 15:35:16'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/background.css"><meta name="generator" content="Hexo 6.1.0"><link rel="alternate" href="/atom.xml" title="Notes" type="application/atom+xml">
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/30/mD5ZV7wdUBGl62S.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">34</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">14</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://s2.loli.net/2022/06/15/25ImNvb9a8WBft3.webp')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Notes</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Hbase概述及搭建</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-06-07T16:00:00.000Z" title="发表于 2022-06-08 00:00:00">2022-06-08</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-06-15T07:35:16.894Z" title="更新于 2022-06-15 15:35:16">2022-06-15</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Hbase概述及搭建"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="一、了解HBase"><a href="#一、了解HBase" class="headerlink" title="一、了解HBase"></a>一、了解HBase</h2><p>官方文档：<a target="_blank" rel="noopener" href="https://hbase.apache.org/book.html">https://hbase.apache.org/book.html</a></p>
<h3 id="1-1-HBase概述"><a href="#1-1-HBase概述" class="headerlink" title="1.1    HBase概述"></a>1.1    HBase概述</h3><blockquote>
<p>HBase 是一个高可靠性、高性能、面向列、可伸缩的分布式存储系统，用于存储海量的结构化或者半结构化，非结构化的数据</p>
<p>HBase是Hadoop的生态系统之一，是建立在Hadoop文件系统（HDFS）之上的分布式、面向列的数据库，通过利用Hadoop的文件系统提供容错能力。如果需要进行实时读写或者随机访问大规模的数据集的时候，会考虑使用HBase。</p>
<p>HBase作为Google Bigtable的开源实现，Google Bigtable利用GFS作为其文件存储系统类似，则HBase利用Hadoop HDFS作为其文件存储系统；Google通过运行MapReduce来处理Bigtable中的海量数据，同样，HBase利用Hadoop MapReduce来处理HBase中的海量数据；Google Bigtable利用Chubby作为协同服务，HBase利用Zookeeper作为对应。在2010年5月，成为apache顶级项目</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/06/09/IYKfrEsFbvx2Q4A.png" alt="image-20220608204054001"></p>
<h3 id="1-2-HBase处理数据"><a href="#1-2-HBase处理数据" class="headerlink" title="1.2    HBase处理数据"></a>1.2    HBase处理数据</h3><blockquote>
<p>虽然Hadoop是一个高容错、高延时的分布式文件系统和高并发的批处理系统，但是它不适用于提供实时计算；</p>
<p>HBase是可以提供实时计算的分布式数据库，数据被保存在HDFS分布式文件系统上，由HDFS保证期高容错性;</p>
<p>但是再生产环境中，HBase是如何基于hadoop提供实时性呢？ </p>
<p>HBase上的数据是以StoreFile(HFile)二进制流的形式存储在HDFS上block块儿中；</p>
<p>但是HDFS并不知道的HBase用于存储什么，它只把存储文件认为是二进制文件，也就是说，HBase的存储数据对于HDFS文件系统是透明的。</p>
</blockquote>
<h3 id="1-3-HBase与HDFS"><a href="#1-3-HBase与HDFS" class="headerlink" title="1.3    HBase与HDFS"></a>1.3    HBase与HDFS</h3><blockquote>
<p>在下面的表格中，我们对HDFS与HBase进行比较：    </p>
</blockquote>
<table>
<thead>
<tr>
<th>HDFS</th>
<th>HBase</th>
</tr>
</thead>
<tbody><tr>
<td>HDFS适于存储大容量文件的分布式文件系统。</td>
<td>HBase是建立在HDFS之上的数据库。</td>
</tr>
<tr>
<td>HDFS不支持快速单独记录查找。</td>
<td>HBase提供在较大的表快速查找</td>
</tr>
<tr>
<td>HDFS提供了高延迟批量处理;没有批处理概念。</td>
<td>HBase提供了数十亿条记录低延迟访问单个行记录（随机存取）。</td>
</tr>
<tr>
<td>HDFS提供的数据只能顺序访问。</td>
<td>HBase内部使用哈希表和提供随机接入，并且其存储索引，可将在HDFS文件中的数据进行快速查找。</td>
</tr>
</tbody></table>
<p>Hbase—&gt;HashMap</p>
<h2 id="二、HBase相关概念"><a href="#二、HBase相关概念" class="headerlink" title="二、HBase相关概念"></a>二、HBase相关概念</h2><h3 id="2-1-分布式数据库"><a href="#2-1-分布式数据库" class="headerlink" title="2.1    分布式数据库"></a>2.1    分布式数据库</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/06/09/N9gnjo1GSKQ2UY4.png" alt="image-20220609215840812"></p>
<h3 id="2-2-列式存储"><a href="#2-2-列式存储" class="headerlink" title="2.2    列式存储"></a>2.2    列式存储</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/06/09/PmgjIZuvkKYE72C.png" alt="image-20220609215924536"></p>
<h3 id="2-3-稀疏性"><a href="#2-3-稀疏性" class="headerlink" title="2.3    稀疏性"></a>2.3    稀疏性</h3><blockquote>
<p>理解稀疏（rowkey）</p>
<p>HBase中需要根据行键、列族、列限定符和时间戳来确定一个单元格，因此，可以视为一个“<strong>四维坐标</strong>”，即**[行键, 列族, 列限定符, 时间戳]**</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/06/09/kC42Rz8LeFw67vy.png" alt="稀疏性"></p>
<h3 id="2-4-数据模型"><a href="#2-4-数据模型" class="headerlink" title="2.4    数据模型"></a>2.4    数据模型</h3><blockquote>
<p>HBase通过表格的模式存储数据，每个表格由列和行组成，其中，每个列又被划分为若干个列族（colnum family），请参考下面的图：</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/06/09/eHQcAD7hfqXNRk4.png" alt="image-20220609220036643"></p>
<blockquote>
<p>          <strong>表：</strong>HBase的数据同样是用表来组织的，表由行和列组成，列分为若干个列族，行和列的坐标交叉决定了一个单元格。</p>
<p>       <strong>行：</strong>每个表由若干行组成，每个行有一个行键作为这一行的唯一标识。访问表中的行只有三种方式：通过单个行键进行查询、通过一个行键的区间来访问、全表扫描。</p>
<p>       <strong>列族：</strong>一个HBase表被分组成许多“列族”的集合，它是基本的访问控制单元。</p>
<p>       <strong>列修饰符（列限定符）：</strong>列族里的数据通过列限定符（或列）来定位</p>
<p>       <strong>单元格：</strong>在HBase表中，通过行、列族和列限定符确定一个“单元格”（cell），单元格中存储的数据没有数据类型，<strong>总被视为字节数组byte[]</strong></p>
<p>       <strong>时间戳：</strong>每个单元格都保存着同一份数据的多个版本，这些版本采用时间戳进行索引</p>
</blockquote>
<h4 id="2-4-1-Hbase数据模型"><a href="#2-4-1-Hbase数据模型" class="headerlink" title="2.4.1    Hbase数据模型"></a>2.4.1    Hbase数据模型</h4><blockquote>
<p>HBase将数据存放在带有标签的<strong>表</strong>中，表由<strong>行和列</strong>组成，行和列交叉确定一个<strong>单元格</strong>，单元格有<strong>版本号</strong>，版本号自动分配，为数据插入该单元格时的<strong>时间戳</strong>。单元格的内容没有数据类型，<strong>所有数据都被视为未解释的字节数组</strong>。</p>
<p>  表格中每一行有一个<strong>行键</strong>（也是字节数组，任何形式的数据都可以表示成字符串，比如数据结构进行序列化之后），<strong>整个表根据行键的字节序来排序</strong>，所有对表的访问必须通过行键。</p>
<p>  表中的列又划分为多个<strong>列族</strong>（column family），同一个列族的所有成员具有相同的前缀，具体的列由列修饰符标识，因此，<strong>列族和列修饰符</strong>合起来才可以表示某一列，比如：info:format、cotents:image</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/06/09/JkNlnw1zLYGjP2u.png" alt="image-20220609220054289"></p>
<blockquote>
<p>在创建一个表的时候，列族必须作为模式定义的一部分预先给出，而<strong>列族是支持动态扩展的</strong>，也就是列族成员可以随后按需加入。物理上，所有的列族成员一起存放在文件系统上，所以实际上说HBase是面向列的数据库，更准确的应该是<strong>面向列族</strong>，调优和存储都是在列族这个层次上进行的。一般情况下，同一个列族的成员最后具有相同的访问模式和大小特征。</p>
<p>  总结起来，HBase表和我们熟知的RDBMS的表很像，不同之处在于：<strong>行按行键排序，列划分为列族，单元格有版本号，没有数据类型。</strong></p>
</blockquote>
<h4 id="2-4-2-Hbase数据坐标"><a href="#2-4-2-Hbase数据坐标" class="headerlink" title="2.4.2    Hbase数据坐标"></a>2.4.2    Hbase数据坐标</h4><blockquote>
<p>HBase中需要根据行键、列族、列限定符和时间戳来确定一个<strong>单元格(cell)<strong>，cell中的数据是没有类型的，全部是</strong>字节码</strong>形式存贮。，因此，可以视为一个“<strong>四维坐标</strong>”，即**[行键, 列族, 列限定符, 时间戳]**。</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/06/09/kz6J29nxcSCYZlV.png" alt="image-20220609220127385"></p>
<blockquote>
<p>对于上图这样一个HBase表，其数据坐标举例如下：</p>
</blockquote>
<table>
<thead>
<tr>
<th>键</th>
<th>值</th>
</tr>
</thead>
<tbody><tr>
<td>[“201505003”, “Info”, “email”, 1174184619081]</td>
<td>“<a href="mailto:&#x78;&#105;&#x65;&#64;&#113;&#x71;&#x2e;&#x63;&#111;&#x6d;">&#x78;&#105;&#x65;&#64;&#113;&#x71;&#x2e;&#x63;&#111;&#x6d;</a>”</td>
</tr>
<tr>
<td>[“201505003”, “Info”, “email”, 1174184620720]</td>
<td>“<a href="mailto:&#x79;&#111;&#x75;&#x40;&#x31;&#x36;&#x33;&#x2e;&#x63;&#111;&#109;">&#x79;&#111;&#x75;&#x40;&#x31;&#x36;&#x33;&#x2e;&#x63;&#111;&#109;</a>”</td>
</tr>
</tbody></table>
<h4 id="2-4-3-HBase区域"><a href="#2-4-3-HBase区域" class="headerlink" title="2.4.3    HBase区域"></a>2.4.3    HBase区域</h4><blockquote>
<p>HBase自动把表水平划分为<strong>区域</strong>（Region），每个区域都是有若干连续行构成的，一个区域由<strong>所属的表、起始行、终止行（不包括这行）</strong>三个要素来表示。</p>
<p>  一开始，一个表只有一个区域，但是随着数据的增加，区域逐渐变大，等到它超出设定的阈值大小，就会在某行的边界上进行拆分，分成两个大小<strong>基本相同</strong>的区域。然后随着数据的再增加，区域就不断的增加，如果超出了单台服务器的容量，就可以把一些区域放到其他节点上去，构成一个集群。也就是说：<strong>集群中的每个节点（Region Server）管理整个表的若干个区域</strong>。所以，我们说：<strong>区域是HBase集群上分布数据的最小单位</strong>。</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/06/09/4lDPXtMkmfhdz2C.png" alt="image-20220609220146716"></p>
<h2 id="三、HBase系统架构"><a href="#三、HBase系统架构" class="headerlink" title="三、HBase系统架构"></a>三、HBase系统架构</h2><h3 id="3-1-架构图"><a href="#3-1-架构图" class="headerlink" title="3.1    架构图"></a>3.1    架构图</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/06/09/Dhl7Z3jRKHa8F2p.png" alt="image-20220609220202453"></p>
<h3 id="3-2-组件介绍"><a href="#3-2-组件介绍" class="headerlink" title="3.2    组件介绍"></a>3.2    组件介绍</h3><p>HBase由三种类型的服务器以主从模式构成：</p>
<ul>
<li>Region Server：负责数据的读写服务，用户通过与Region server交互来实现对数据的访问。</li>
<li>HBase HMaster：负责Region的分配及数据库的创建和删除等操作。</li>
<li>ZooKeeper：负责维护集群的状态（某台服务器是否在线，服务器之间数据的同步操作及master的选举等）。</li>
</ul>
<p>HDFS的DataNode负责存储所有Region Server所管理的数据，即HBase中的所有数据都是以HDFS文件的形式存储的。出于使Region server所管理的数据更加本地化的考虑，Region server是根据DataNode分布的。HBase的数据在写入的时候都存储在本地。但当某一个region被移除或被重新分配的时候，就可能产生数据不在本地的情况。这种情况只有在所谓的compaction之后才能解决。</p>
<h4 id="Client"><a href="#Client" class="headerlink" title="Client"></a>Client</h4><blockquote>
<p>包含访问HBase的接口并维护cache来加快对HBase的访问</p>
</blockquote>
<h4 id="Zookeeper"><a href="#Zookeeper" class="headerlink" title="Zookeeper"></a>Zookeeper</h4><blockquote>
<p>保证任何时候，集群中只有一个master</p>
<p>存贮所有Region的寻址入口。</p>
<p>实时监控Region server的上线和下线信息。并实时通知Master</p>
<p>存储HBase的schema和table元数据</p>
</blockquote>
<h4 id="Master"><a href="#Master" class="headerlink" title="Master"></a>Master</h4><blockquote>
<p>为Region server分配region</p>
<p>负责Region server的负载均衡</p>
<p>发现失效的Region server并重新分配其上的region</p>
<p>管理用户对table的增删改操作</p>
</blockquote>
<h4 id="RegionServer"><a href="#RegionServer" class="headerlink" title="RegionServer"></a>RegionServer</h4><blockquote>
<p>Region server维护region，处理对这些region的IO请求</p>
<p>Region server负责切分在运行过程中变得过大的region　</p>
</blockquote>
<h4 id="HLog-WAL-log-："><a href="#HLog-WAL-log-：" class="headerlink" title="HLog(WAL log)："></a>HLog(WAL log)：</h4><blockquote>
<p>HLog文件就是一个普通的Hadoop Sequence File，Sequence File 的Key是 HLogKey对象，HLogKey中记录了写入数据的归属信息，除了table和 region名字外，同时还包括sequence number和timestamp，timestamp是” 写入时间”，sequence number的起始值为0，或者是最近一次存入文件系 统sequence number。</p>
<p>HLog SequeceFile的Value是HBase的KeyValue对象，即对应HFile中的 KeyValue</p>
</blockquote>
<h4 id="Region"><a href="#Region" class="headerlink" title="Region"></a>Region</h4><blockquote>
<p>HBase自动把表水平划分成多个区域(region)，每个region会保存一个表里面某段连续的数据；每个表一开始只有一个region，随着数据不断插 入表，region不断增大，当增大到一个阀值的时候，region就会等分会两个新的region（裂变）；</p>
<p>当table中的行不断增多，就会有越来越多的region。这样一张完整的表被保存在多个Regionserver上。</p>
</blockquote>
<h4 id="Memstore-与-storefile"><a href="#Memstore-与-storefile" class="headerlink" title="Memstore 与 storefile"></a>Memstore 与 storefile</h4><blockquote>
<ol>
<li><p>一个region由多个store组成，一个store对应一个CF（列簇）</p>
</li>
<li><p>store包括位于内存中的memstore和位于磁盘的storefile写操作先写入 memstore，当memstore中的数据达到某个阈值，hregionserver会启动 flashcache进程写入storefile，每次写入形成单独的一个storefile</p>
</li>
<li><p>当storefile文件的数量增长到一定阈值后，系统会进行合并（minor、 major compaction），在合并过程中会进行版本合并和删除工作 （majar），形成更大的storefile。</p>
</li>
<li><p>当一个region所有storefile的大小和超过一定阈值后，会把当前的region 分割为两个，并由hmaster分配到相应的regionserver服务器，实现负载均衡。</p>
</li>
<li><p>客户端检索数据，先在memstore找，找不到再找storefile</p>
</li>
<li><p>HRegion是HBase中分布式存储和负载均衡的最小单元。最小单元就表 示不同的HRegion可以分布在不同的HRegion server上。</p>
</li>
<li><p>HRegion由一个或者多个Store组成，每个store保存一个columns family。</p>
</li>
<li><p>每个Strore又由一个memStore和0至多个StoreFile组成。</p>
</li>
</ol>
<p>如图：StoreFile 以HFile格式保存在HDFS上。</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/06/09/ckzY96POTFUQwtK.png" alt="image-20220609220217852"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/06/09/B5yDYaUn7vM3lif.png" alt="image-20220609220227154"></p>
<h3 id="3-3-理解难点"><a href="#3-3-理解难点" class="headerlink" title="3.3    理解难点"></a>3.3    理解难点</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">　　1、flush刷新在HDFS上呈现究竟是怎么刷新的呢？？</span><br><span class="line">　　　　我们目前刚刚学习的时候，添加数据，都是一条一条的put进去，而我们在put的数据比较少（小于128M）的时候，我们put完去HDFS上并未查看到我们put的文件，这是因为数据还在内存中，也就是还在memStore中，所以要想在HDFS中查看到，我们必须手动刷新到磁盘中，这是将memStore的数据刷新到StoreFile中去，这样我们在HDFS中就可以查看到了。　　</span><br><span class="line"></span><br><span class="line">　　2、为什么Hbase不可以使用像Mysql那样进行查询？？</span><br><span class="line">　　　　首先，我们应该可以感受到，我们在插入的时候，每行数据，有多少列，列名叫什么完全是我们自己定义的，之所以不支持像MySql那样对列进行查询和操作，因为不确定列的个数和名称。</span><br><span class="line"></span><br><span class="line">　　3、数据最后存在HDFS上的，HDFS不支持删改，为什么Hbase就可以呢？？</span><br><span class="line">　　　　这里有个思想误区，的确，数据是以HFile形式存在HDFS上的，而且HDFS的确是不支持删改的，但是为什么Hbase就支持呢？首先，这里的删除并不是真正意义上的对数据进行删除，而是对数据进行打上标记，我们再去查的时，就不会查到这个打过标记的数据，这个数据Hmaster会每隔1小时清理。修改是put两次，Hbase会取最新的数据，过期数据也是这个方式被清理。</span><br></pre></td></tr></table></figure>

<h2 id="四、HBase1-4-6安装搭建"><a href="#四、HBase1-4-6安装搭建" class="headerlink" title="四、HBase1.4.6安装搭建"></a>四、HBase1.4.6安装搭建</h2><h3 id="4-1-hbase下载"><a href="#4-1-hbase下载" class="headerlink" title="4.1 hbase下载"></a>4.1 hbase下载</h3><p><strong>后期在测试时发现1.7.1不是很兼容，因此回退到1.4.6版本</strong></p>
<p>官网下载地址：<a target="_blank" rel="noopener" href="https://archive.apache.org/dist/hbase/1.4.6/hbase-1.4.6-bin.tar.gz">https://archive.apache.org/dist/hbase/1.4.6/hbase-1.4.6-bin.tar.gz</a></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/06/09/duV1iZ2pMrFfqCO.png" alt="image-20220609220320634"></p>
<h3 id="4-2-前期准备（Hadoop-zookeeper-jdk）"><a href="#4-2-前期准备（Hadoop-zookeeper-jdk）" class="headerlink" title="4.2 前期准备（Hadoop,zookeeper,jdk）"></a>4.2 前期准备（Hadoop,zookeeper,jdk）</h3><blockquote>
<p>启动hadoop</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">start-all.sh</span><br></pre></td></tr></table></figure>

<blockquote>
<p>验证</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">http://master:50070</span><br></pre></td></tr></table></figure>

<blockquote>
<p>启动zookeeper（三台分别启动）</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">zkServer.sh start</span><br></pre></td></tr></table></figure>

<blockquote>
<p>检查状态</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">zkServer.sh status</span><br></pre></td></tr></table></figure>

<h3 id="4-3-搭建Hbase"><a href="#4-3-搭建Hbase" class="headerlink" title="4.3    搭建Hbase"></a>4.3    搭建Hbase</h3><h4 id="1、上传解压"><a href="#1、上传解压" class="headerlink" title="1、上传解压"></a>1、上传解压</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tar -zxvf hbase-1.4.6-bin.tar.gz</span><br></pre></td></tr></table></figure>

<h4 id="2、配置环境变量"><a href="#2、配置环境变量" class="headerlink" title="2、配置环境变量"></a>2、配置环境变量</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">export HBASE_HOME=/usr/local/soft/hbase-1.4.6</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">$</span><span class="language-bash">HBASE_HOME/bin</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>source &#x2F;etc&#x2F;profile</p>
</blockquote>
<h4 id="3、修改hbase-env-sh文件"><a href="#3、修改hbase-env-sh文件" class="headerlink" title="3、修改hbase-env.sh文件"></a>3、修改hbase-env.sh文件</h4><blockquote>
<p>增加java配置</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">export JAVA_HOME=/usr/local/soft/jdk1.8.0_171</span><br></pre></td></tr></table></figure>

<blockquote>
<p>关闭默认zk配置（原本是注释的，放开修改false）</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">export HBASE_MANAGES_ZK=false</span><br></pre></td></tr></table></figure>

<h4 id="4、修改hbase-site-xml文件"><a href="#4、修改hbase-site-xml文件" class="headerlink" title="4、修改hbase-site.xml文件"></a>4、修改hbase-site.xml文件</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">   <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.rootdir<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">   <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://master:9000/hbase<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">   <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.cluster.distributed<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">   <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span> </span><br><span class="line">   <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.zookeeper.quorum<span class="tag">&lt;/<span class="name">name</span>&gt;</span> </span><br><span class="line">   <span class="tag">&lt;<span class="name">value</span>&gt;</span>node1,node2,master<span class="tag">&lt;/<span class="name">value</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span> </span><br></pre></td></tr></table></figure>

<h4 id="5、修改regionservers文件"><a href="#5、修改regionservers文件" class="headerlink" title="5、修改regionservers文件"></a>5、修改regionservers文件</h4><blockquote>
<p>如果是伪分布式版本，增加master即可</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">node1</span><br><span class="line">node2</span><br></pre></td></tr></table></figure>

<h4 id="6、同步到所有节点（如果是伪分布式不需要同步）"><a href="#6、同步到所有节点（如果是伪分布式不需要同步）" class="headerlink" title="6、同步到所有节点（如果是伪分布式不需要同步）"></a>6、同步到所有节点（如果是伪分布式不需要同步）</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">scp -r hbase-1.4.6 node1:`pwd`</span><br><span class="line">scp -r hbase-1.4.6 node2:`pwd`</span><br></pre></td></tr></table></figure>

<h4 id="7、启动hbase集群-，-在master上执行"><a href="#7、启动hbase集群-，-在master上执行" class="headerlink" title="7、启动hbase集群 ， 在master上执行"></a>7、启动hbase集群 ， 在master上执行</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">start-hbase.sh</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/06/09/6ybGojvBhIMR2VP.png" alt="image-20220609220348414"></p>
<h4 id="8、验证hbase"><a href="#8、验证hbase" class="headerlink" title="8、验证hbase"></a>8、验证hbase</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://master:16010</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/06/09/GetFKMrWAZJDdqC.png" alt="image-20220609220410102"></p>
<blockquote>
<p>hbase日志文件所在的目录: &#x2F;usr&#x2F;local&#x2F;soft&#x2F;hbase-1.7.1&#x2F;logs</p>
</blockquote>
<h4 id="9、关闭集群的命令"><a href="#9、关闭集群的命令" class="headerlink" title="9、关闭集群的命令"></a>9、关闭集群的命令</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">stop-hbase.sh</span><br></pre></td></tr></table></figure>

<h3 id="4-4-启动顺序"><a href="#4-4-启动顺序" class="headerlink" title="4.4    启动顺序"></a>4.4    启动顺序</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">启动顺序</span><br><span class="line">Hadoop及hbase集群启动顺序 zookeepeer -&gt; hadoop -&gt; hbase</span><br><span class="line"></span><br><span class="line">停止顺序</span><br><span class="line">Hadoop及hbase集群关闭顺序 hbase -&gt; hadoop -&gt; zookeepeer</span><br></pre></td></tr></table></figure>

<h3 id="4-5-重置hbase"><a href="#4-5-重置hbase" class="headerlink" title="4.5    重置hbase"></a>4.5    重置hbase</h3><h5 id="1、关闭hbase集群"><a href="#1、关闭hbase集群" class="headerlink" title="1、关闭hbase集群"></a>1、关闭hbase集群</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1)杀死进程</span><br><span class="line">   </span><br><span class="line">2)stop-hbase.sh</span><br></pre></td></tr></table></figure>

<h5 id="2、删除数据-hdfs"><a href="#2、删除数据-hdfs" class="headerlink" title="2、删除数据   hdfs"></a>2、删除数据   hdfs</h5> <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hdfs dfs -rmr /hbase</span><br></pre></td></tr></table></figure>

<h5 id="3、删除元数据-zk"><a href="#3、删除元数据-zk" class="headerlink" title="3、删除元数据 zk"></a>3、删除元数据 zk</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">zkCli.sh</span><br><span class="line">rmr /hbase</span><br></pre></td></tr></table></figure>

<h5 id="4、重新启动hbase"><a href="#4、重新启动hbase" class="headerlink" title="4、重新启动hbase"></a>4、重新启动hbase</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">start-hbase.sh</span><br></pre></td></tr></table></figure>

<h5 id="时间同步"><a href="#时间同步" class="headerlink" title="时间同步"></a>时间同步</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">yum install ntp -y</span><br><span class="line"></span><br><span class="line">ntpdate -u time.windows.com</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">秋水一色</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2022/06/08/Hbase%E6%A6%82%E8%BF%B0%E5%8F%8A%E6%90%AD%E5%BB%BA/">http://example.com/2022/06/08/Hbase%E6%A6%82%E8%BF%B0%E5%8F%8A%E6%90%AD%E5%BB%BA/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">Notes</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Hbase/">Hbase</a></div><div class="post_share"><div class="social-share" data-image="https://s2.loli.net/2022/06/15/25ImNvb9a8WBft3.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/06/10/Hbase%20Shell%201/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/06/15/25ImNvb9a8WBft3.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Hbase shell1</div></div></a></div><div class="next-post pull-right"><a href="/2022/06/07/Hive%E4%BC%98%E5%8C%96/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/06/15/25ImNvb9a8WBft3.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Hive优化</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/06/11/Hbase%20Shell%202/" title="Hbase-shell2"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/06/15/25ImNvb9a8WBft3.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-06-11</div><div class="title">Hbase-shell2</div></div></a></div><div><a href="/2022/06/10/Hbase%20Shell%201/" title="Hbase shell1"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/06/15/25ImNvb9a8WBft3.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-06-10</div><div class="title">Hbase shell1</div></div></a></div><div><a href="/2022/06/13/Hbase%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C/" title="Hbase高级操作"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/06/15/25ImNvb9a8WBft3.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-06-13</div><div class="title">Hbase高级操作</div></div></a></div><div><a href="/2022/06/11/Hbase%E8%BF%87%E6%BB%A4%E5%99%A8/" title="Hbase过滤器"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/06/15/25ImNvb9a8WBft3.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-06-11</div><div class="title">Hbase过滤器</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/03/30/mD5ZV7wdUBGl62S.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">秋水一色</div><div class="author-info__description">春风得意马蹄疾,一日看尽长安花</div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">34</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">14</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/hzh4015"><i class="fab fa-github"></i><span>一起学习，加油！</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/hzh4015" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:hzh4015@163.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=2597845702&amp;website=www.oicqzone.com" target="_blank" title="QQ"><i class="fab fa-qq"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">这是我的第一个笔记</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E4%BA%86%E8%A7%A3HBase"><span class="toc-number">1.</span> <span class="toc-text">一、了解HBase</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-HBase%E6%A6%82%E8%BF%B0"><span class="toc-number">1.1.</span> <span class="toc-text">1.1    HBase概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-HBase%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE"><span class="toc-number">1.2.</span> <span class="toc-text">1.2    HBase处理数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-HBase%E4%B8%8EHDFS"><span class="toc-number">1.3.</span> <span class="toc-text">1.3    HBase与HDFS</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81HBase%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5"><span class="toc-number">2.</span> <span class="toc-text">二、HBase相关概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E5%88%86%E5%B8%83%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">2.1.</span> <span class="toc-text">2.1    分布式数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E5%88%97%E5%BC%8F%E5%AD%98%E5%82%A8"><span class="toc-number">2.2.</span> <span class="toc-text">2.2    列式存储</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E7%A8%80%E7%96%8F%E6%80%A7"><span class="toc-number">2.3.</span> <span class="toc-text">2.3    稀疏性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.4.</span> <span class="toc-text">2.4    数据模型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-1-Hbase%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.4.1.</span> <span class="toc-text">2.4.1    Hbase数据模型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-2-Hbase%E6%95%B0%E6%8D%AE%E5%9D%90%E6%A0%87"><span class="toc-number">2.4.2.</span> <span class="toc-text">2.4.2    Hbase数据坐标</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-3-HBase%E5%8C%BA%E5%9F%9F"><span class="toc-number">2.4.3.</span> <span class="toc-text">2.4.3    HBase区域</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81HBase%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84"><span class="toc-number">3.</span> <span class="toc-text">三、HBase系统架构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E6%9E%B6%E6%9E%84%E5%9B%BE"><span class="toc-number">3.1.</span> <span class="toc-text">3.1    架构图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E7%BB%84%E4%BB%B6%E4%BB%8B%E7%BB%8D"><span class="toc-number">3.2.</span> <span class="toc-text">3.2    组件介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Client"><span class="toc-number">3.2.1.</span> <span class="toc-text">Client</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Zookeeper"><span class="toc-number">3.2.2.</span> <span class="toc-text">Zookeeper</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Master"><span class="toc-number">3.2.3.</span> <span class="toc-text">Master</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RegionServer"><span class="toc-number">3.2.4.</span> <span class="toc-text">RegionServer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HLog-WAL-log-%EF%BC%9A"><span class="toc-number">3.2.5.</span> <span class="toc-text">HLog(WAL log)：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Region"><span class="toc-number">3.2.6.</span> <span class="toc-text">Region</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Memstore-%E4%B8%8E-storefile"><span class="toc-number">3.2.7.</span> <span class="toc-text">Memstore 与 storefile</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E7%90%86%E8%A7%A3%E9%9A%BE%E7%82%B9"><span class="toc-number">3.3.</span> <span class="toc-text">3.3    理解难点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81HBase1-4-6%E5%AE%89%E8%A3%85%E6%90%AD%E5%BB%BA"><span class="toc-number">4.</span> <span class="toc-text">四、HBase1.4.6安装搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-hbase%E4%B8%8B%E8%BD%BD"><span class="toc-number">4.1.</span> <span class="toc-text">4.1 hbase下载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87%EF%BC%88Hadoop-zookeeper-jdk%EF%BC%89"><span class="toc-number">4.2.</span> <span class="toc-text">4.2 前期准备（Hadoop,zookeeper,jdk）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E6%90%AD%E5%BB%BAHbase"><span class="toc-number">4.3.</span> <span class="toc-text">4.3    搭建Hbase</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E4%B8%8A%E4%BC%A0%E8%A7%A3%E5%8E%8B"><span class="toc-number">4.3.1.</span> <span class="toc-text">1、上传解压</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">4.3.2.</span> <span class="toc-text">2、配置环境变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E4%BF%AE%E6%94%B9hbase-env-sh%E6%96%87%E4%BB%B6"><span class="toc-number">4.3.3.</span> <span class="toc-text">3、修改hbase-env.sh文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81%E4%BF%AE%E6%94%B9hbase-site-xml%E6%96%87%E4%BB%B6"><span class="toc-number">4.3.4.</span> <span class="toc-text">4、修改hbase-site.xml文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%E3%80%81%E4%BF%AE%E6%94%B9regionservers%E6%96%87%E4%BB%B6"><span class="toc-number">4.3.5.</span> <span class="toc-text">5、修改regionservers文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%E3%80%81%E5%90%8C%E6%AD%A5%E5%88%B0%E6%89%80%E6%9C%89%E8%8A%82%E7%82%B9%EF%BC%88%E5%A6%82%E6%9E%9C%E6%98%AF%E4%BC%AA%E5%88%86%E5%B8%83%E5%BC%8F%E4%B8%8D%E9%9C%80%E8%A6%81%E5%90%8C%E6%AD%A5%EF%BC%89"><span class="toc-number">4.3.6.</span> <span class="toc-text">6、同步到所有节点（如果是伪分布式不需要同步）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7%E3%80%81%E5%90%AF%E5%8A%A8hbase%E9%9B%86%E7%BE%A4-%EF%BC%8C-%E5%9C%A8master%E4%B8%8A%E6%89%A7%E8%A1%8C"><span class="toc-number">4.3.7.</span> <span class="toc-text">7、启动hbase集群 ， 在master上执行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8%E3%80%81%E9%AA%8C%E8%AF%81hbase"><span class="toc-number">4.3.8.</span> <span class="toc-text">8、验证hbase</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9%E3%80%81%E5%85%B3%E9%97%AD%E9%9B%86%E7%BE%A4%E7%9A%84%E5%91%BD%E4%BB%A4"><span class="toc-number">4.3.9.</span> <span class="toc-text">9、关闭集群的命令</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-%E5%90%AF%E5%8A%A8%E9%A1%BA%E5%BA%8F"><span class="toc-number">4.4.</span> <span class="toc-text">4.4    启动顺序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-%E9%87%8D%E7%BD%AEhbase"><span class="toc-number">4.5.</span> <span class="toc-text">4.5    重置hbase</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81%E5%85%B3%E9%97%ADhbase%E9%9B%86%E7%BE%A4"><span class="toc-number">4.5.0.1.</span> <span class="toc-text">1、关闭hbase集群</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE-hdfs"><span class="toc-number">4.5.0.2.</span> <span class="toc-text">2、删除数据   hdfs</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E3%80%81%E5%88%A0%E9%99%A4%E5%85%83%E6%95%B0%E6%8D%AE-zk"><span class="toc-number">4.5.0.3.</span> <span class="toc-text">3、删除元数据 zk</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4%E3%80%81%E9%87%8D%E6%96%B0%E5%90%AF%E5%8A%A8hbase"><span class="toc-number">4.5.0.4.</span> <span class="toc-text">4、重新启动hbase</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E5%90%8C%E6%AD%A5"><span class="toc-number">4.5.0.5.</span> <span class="toc-text">时间同步</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/06/16/Sqoop/" title="Sqoop"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/06/15/25ImNvb9a8WBft3.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Sqoop"/></a><div class="content"><a class="title" href="/2022/06/16/Sqoop/" title="Sqoop">Sqoop</a><time datetime="2022-06-15T16:00:00.000Z" title="发表于 2022-06-16 00:00:00">2022-06-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/13/Hbase%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C/" title="Hbase高级操作"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/06/15/25ImNvb9a8WBft3.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hbase高级操作"/></a><div class="content"><a class="title" href="/2022/06/13/Hbase%E9%AB%98%E7%BA%A7%E6%93%8D%E4%BD%9C/" title="Hbase高级操作">Hbase高级操作</a><time datetime="2022-06-12T16:00:00.000Z" title="发表于 2022-06-13 00:00:00">2022-06-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/11/Hbase%20Shell%202/" title="Hbase-shell2"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/06/15/25ImNvb9a8WBft3.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hbase-shell2"/></a><div class="content"><a class="title" href="/2022/06/11/Hbase%20Shell%202/" title="Hbase-shell2">Hbase-shell2</a><time datetime="2022-06-10T16:00:00.000Z" title="发表于 2022-06-11 00:00:00">2022-06-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/11/Hbase%E8%BF%87%E6%BB%A4%E5%99%A8/" title="Hbase过滤器"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/06/15/25ImNvb9a8WBft3.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hbase过滤器"/></a><div class="content"><a class="title" href="/2022/06/11/Hbase%E8%BF%87%E6%BB%A4%E5%99%A8/" title="Hbase过滤器">Hbase过滤器</a><time datetime="2022-06-10T16:00:00.000Z" title="发表于 2022-06-11 00:00:00">2022-06-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/10/Hbase%20Shell%201/" title="Hbase shell1"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/06/15/25ImNvb9a8WBft3.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hbase shell1"/></a><div class="content"><a class="title" href="/2022/06/10/Hbase%20Shell%201/" title="Hbase shell1">Hbase shell1</a><time datetime="2022-06-09T16:00:00.000Z" title="发表于 2022-06-10 00:00:00">2022-06-10</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://s2.loli.net/2022/06/15/25ImNvb9a8WBft3.webp')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By 秋水一色</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">本地搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>